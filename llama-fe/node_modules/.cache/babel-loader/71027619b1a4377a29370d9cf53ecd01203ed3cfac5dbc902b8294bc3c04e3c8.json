{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import cook from\"./assets/cook.png\";import\"./App.css\";import TextInput from\"./components/TextInput\";import ChatContainer from\"./components/ChatContainer\";import{getReplyFromQn,saveMessages}from\"./utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isSent,setIsSent]=useState(false);const[currMsg,setCurrMsg]=useState(null);const[reply,setReply]=useState(null);const[messages,setMessages]=useState([]);const[refetch,setRefetch]=useState(false);const[isFetching,setFetching]=useState(false);useEffect(()=>{// load in messages from db\nconst localMsgsString=localStorage.getItem(\"messages\");let loadedMsgs=[];if(localMsgsString){loadedMsgs=JSON.parse(localMsgsString);}setMessages(loadedMsgs);},[]);useEffect(()=>{const send=async()=>{if(isSent&&currMsg){console.log(\"fetching\");setFetching(true);const res=await getReplyFromQn(currMsg);const temp=messages;temp.push({isUser:false,message:res});saveMessages(temp);setMessages(temp);setFetching(false);}setIsSent(false);};send();},[isSent]);useEffect(()=>{if(refetch){setMessages([]);setCurrMsg(null);setReply(null);setRefetch(false);}},[refetch]);return/*#__PURE__*/_jsx(\"div\",{className:\"w-screen h-screen flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pt-3 pb-3 pl-6 pr-6 w-full h-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold h-[40px] items-center flex\",children:\"LlaMa Lunch\"}),/*#__PURE__*/_jsx(\"img\",{src:cook,alt:\"cook\",className:\"w-[40px]\"})]}),/*#__PURE__*/_jsx(ChatContainer,{reply:reply,msg:currMsg,messages:messages,isFetching:isFetching}),/*#__PURE__*/_jsx(TextInput,{setRefetch:setRefetch,setIsSent:setIsSent,setCurrMsg:setCurrMsg,currMsg:currMsg,setMessages:setMessages,messages:messages}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 text-sm text-slate-500\",children:[\"Made with\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"https://ai.meta.com/llama/\",className:\"font-semibold\",target:\"_blank\",rel:\"noreferrer\",children:\"Llama2\"}),\", by Andre Lin, Bernice Toh, Kang Yue Ran\"]})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","cook","TextInput","ChatContainer","getReplyFromQn","saveMessages","jsx","_jsx","jsxs","_jsxs","App","isSent","setIsSent","currMsg","setCurrMsg","reply","setReply","messages","setMessages","refetch","setRefetch","isFetching","setFetching","localMsgsString","localStorage","getItem","loadedMsgs","JSON","parse","send","console","log","res","temp","push","isUser","message","className","children","src","alt","msg","href","target","rel"],"sources":["/Users/bernicetoh/llamalunch/src/App.tsx"],"sourcesContent":["import React, { SyntheticEvent, useEffect, useState } from \"react\";\nimport cook from \"./assets/cook.png\";\nimport \"./App.css\";\nimport TextInput from \"./components/TextInput\";\nimport ChatContainer from \"./components/ChatContainer\";\nimport { Message, getReplyFromQn, saveMessages } from \"./utils\";\nfunction App() {\n  const [isSent, setIsSent] = useState(false);\n  const [currMsg, setCurrMsg] = useState<string | null>(null);\n  const [reply, setReply] = useState<string | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [refetch, setRefetch] = useState(false);\n  const [isFetching, setFetching] = useState(false);\n\n  useEffect(() => {\n    // load in messages from db\n    const localMsgsString = localStorage.getItem(\"messages\");\n    let loadedMsgs = [];\n    if (localMsgsString) {\n      loadedMsgs = JSON.parse(localMsgsString);\n    }\n    setMessages(loadedMsgs);\n  }, []);\n\n  useEffect(() => {\n    const send = async () => {\n      if (isSent && currMsg) {\n        console.log(\"fetching\");\n        setFetching(true);\n        const res = await getReplyFromQn(currMsg);\n        const temp = messages;\n        temp.push({\n          isUser: false,\n          message: res,\n        });\n        saveMessages(temp);\n        setMessages(temp);\n        setFetching(false);\n      }\n      setIsSent(false);\n    };\n    send();\n  }, [isSent]);\n\n  useEffect(() => {\n    if (refetch) {\n      setMessages([]);\n      setCurrMsg(null);\n      setReply(null);\n      setRefetch(false);\n    }\n  }, [refetch]);\n\n  return (\n    <div className=\"w-screen h-screen flex justify-center\">\n      <div className=\"pt-3 pb-3 pl-6 pr-6 w-full h-full flex flex-col\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"text-xl font-bold h-[40px] items-center flex\">\n            LlaMa Lunch\n          </div>\n          <img src={cook} alt=\"cook\" className=\"w-[40px]\" />\n        </div>\n        {/* chat container */}\n        <ChatContainer\n          reply={reply}\n          msg={currMsg}\n          messages={messages}\n          isFetching={isFetching}\n        />\n\n        {/* text input */}\n        <TextInput\n          setRefetch={setRefetch}\n          setIsSent={setIsSent}\n          setCurrMsg={setCurrMsg}\n          currMsg={currMsg}\n          setMessages={setMessages}\n          messages={messages}\n        />\n        {/* footer */}\n        <div className=\"p-3 text-sm text-slate-500\">\n          Made with{\" \"}\n          <a\n            href=\"https://ai.meta.com/llama/\"\n            className=\"font-semibold\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            Llama2\n          </a>\n          , by Andre Lin, Bernice Toh, Kang Yue Ran\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}